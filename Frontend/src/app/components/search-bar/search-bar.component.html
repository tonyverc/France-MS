<div class="search-container relative w-full max-w-2xl bg-white rounded-lg shadow-md">
  <!-- Input de recherche -->
  <div class="relative">
    <!-- Icône de recherche -->
    <svg 
      class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none" 
      xmlns="http://www.w3.org/2000/svg" 
      fill="none" 
      viewBox="0 0 24 24" 
      stroke="currentColor"
    >
      <circle cx="11" cy="11" r="8" stroke-width="2"></circle>
      <path d="m21 21-4.35-4.35" stroke-width="2"></path>
    </svg>
    
    <!-- Input -->
    <input
      type="text"
      class="w-full pl-10 pr-20 py-2.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
      placeholder="Rechercher sur le site..."
      [(ngModel)]="searchQuery"
      (input)="onSearchInput($event)"
      autocomplete="off"
    />
    
    <!-- Bouton clear -->
    <button 
      *ngIf="searchQuery && !loading" 
      class="absolute right-10 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 text-2xl w-6 h-6 flex items-center justify-center transition-colors"
      (click)="clearSearch()"
      type="button"
    >
      ×
    </button>
    
    <!-- Spinner de chargement -->
    <div *ngIf="loading" class="absolute right-3 top-1/2 -translate-y-1/2">
      <svg class="animate-spin h-5 w-5 text-blue-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
    </div>
  </div>

  <!-- Résultats de recherche -->
  <div 
    *ngIf="showResults && results" 
    class="absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl max-h-[500px] overflow-y-auto z-50"
  >
    <!-- Aucun résultat -->
    <div *ngIf="getTotalResults() === 0" class="p-6 text-center text-gray-500">
      Aucun résultat pour "{{ results.query }}"
    </div>

    <!-- Résultats trouvés -->
    <div *ngIf="getTotalResults() > 0" class="py-2">
      <!-- Produits -->
      <div *ngIf="results.results.products && results.results.products.length > 0" class="border-b border-gray-100 last:border-b-0">
        <h3 class="text-xs font-semibold uppercase text-gray-500 px-4 py-2">
          Produits
        </h3>
        <div 
          *ngFor="let product of results.results.products"
          class="flex items-start px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors"
          (click)="navigateTo('products', product.id)"
        >
          <div class="mr-3 flex-shrink-0 w-20 h-20">
            <img 
              class="w-full h-full object-cover rounded" 
              [src]="product.image" 
              [alt]="product.nom"
            >
          </div>
          <div class="flex-1 min-w-0">
            <div class="font-medium text-gray-900 mb-1">{{ product.nom }}</div>
            <div class="text-sm text-gray-500 truncate">{{ product.description }}</div>
          </div>
        </div>
      </div>

      <!-- Footer avec le nombre de résultats -->
      <div class="px-4 py-3 bg-gray-50 border-t border-gray-200 text-center text-xs text-gray-500">
        {{ getTotalResults() }} résultat(s) trouvé(s)
      </div>
    </div>
  </div>
</div>